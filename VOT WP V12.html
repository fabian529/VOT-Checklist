<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VOT Protokoll (V36 Fixes)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* BASE STYLES */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: #f5f5f7; 
            color: #1d1d1f; 
            -webkit-text-size-adjust: 100%; 
        }
        
        input, select, textarea { font-size: 16px !important; }

        .input-group:focus-within label { transform: translateY(-22px) scale(0.85); color: #0071e3; }
        .input-filled label { transform: translateY(-22px) scale(0.85); }
        .progress-fill { transition: width 0.5s ease-out; }

        /* --- PRINT STYLES --- */
        @media print {
            @page { margin: 10mm; size: A4; }
            
            html, body {
                height: auto !important;
                overflow: visible !important;
                background-color: white !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            .no-print, nav, aside, button, .sidebar, .bottom-bar, .floating-btn { display: none !important; }
            
            #print-view {
                display: block !important;
                width: 100%;
                margin: 0;
                padding: 0;
            }

            .pdf-section { 
                display: block !important; 
                page-break-inside: auto !important;
                break-inside: auto !important;
                margin-bottom: 20px; 
            }

            .pdf-section:not(:first-of-type) {
                page-break-before: always !important;
                break-before: page !important;
            }
            
            .pdf-header { margin-bottom: 20px; break-inside: avoid; }
            .pdf-section-title { page-break-after: avoid; break-after: avoid; margin-top: 20px; }
            
            .pdf-photos { display: block; width: 100%; }

            .pdf-img-container { 
                display: block !important;
                position: relative;
                page-break-inside: avoid !important; 
                break-inside: avoid !important; 
                -webkit-column-break-inside: avoid;
                margin-top: 15px; 
                margin-bottom: 20px;
                background: #fff;
                border: 1px solid #eee;
                padding: 5px;
                border-radius: 4px;
            }
            
            .pdf-img {
                width: 100%; 
                height: auto; 
                display: block;
                max-height: 130mm !important; 
                object-fit: contain;
            }
            
            .rad-table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 10pt; }
            .rad-table th { text-align: left; border-bottom: 2px solid #ddd; padding: 5px; color: #666; font-size: 9pt; }
            .rad-table td { border-bottom: 1px solid #eee; padding: 8px 5px; }
            
            h1, h2, h3, .pdf-label, .pdf-value { color: #000 !important; }
            .pdf-header { border-bottom-color: #0071e3 !important; }
        }

        /* --- SCREEN PREVIEW --- */
        #print-view { display: none; } 
        
        .preview-mode #print-view {
            display: block;
            margin: 20px auto;
            max-width: 210mm;
            min-height: 297mm;
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 40px;
            border-radius: 8px;
        }

        .pdf-header { border-bottom: 2px solid #0071e3; padding-bottom: 20px; margin-bottom: 30px; display: flex; justify-content: space-between; align-items: flex-end; }
        .pdf-title { font-size: 24pt; font-weight: 800; color: #1d1d1f; line-height: 1; }
        .pdf-subtitle { font-size: 10pt; color: #86868b; text-transform: uppercase; letter-spacing: 1px; margin-top: 5px; }
        .pdf-meta { text-align: right; font-size: 10pt; color: #1d1d1f; }
        
        .pdf-section-title { font-size: 14pt; font-weight: 700; color: #1d1d1f; border-bottom: 1px solid #e5e5e5; padding-bottom: 8px; margin-bottom: 20px; }
        
        .pdf-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px 40px; margin-bottom: 20px; }
        .pdf-field { margin-bottom: 5px; }
        .pdf-label { font-size: 8pt; color: #86868b; text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px; }
        .pdf-value { font-size: 11pt; color: #1d1d1f; font-weight: 500; border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; }
        .pdf-full-width { grid-column: span 2; }

        .pdf-photo-title { font-size: 10pt; font-weight: 700; color: #1d1d1f; margin-bottom: 10px; border-left: 4px solid #0071e3; padding-left: 10px; text-transform: uppercase; }
        .pdf-photo-list { display: flex; flex-direction: column; gap: 20px; width: 100%; }
        
        @media screen {
            .pdf-img { max-height: 600px; object-fit: contain; }
            .pdf-img-container { border: 1px solid #e5e5e5; padding: 5px; border-radius: 4px; }
            .rad-card { background: white; border: 1px solid #e5e5e5; padding: 20px; border-radius: 12px; margin-bottom: 15px; position: relative; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
            .rad-delete { 
                position: absolute; 
                top: 15px; 
                right: 15px; 
                color: #ef4444; 
                background: #fee2e2; 
                padding: 10px; 
                border-radius: 50%; 
                cursor: pointer;
                transition: background-color 0.2s;
                z-index: 50; /* Ensure high z-index to be clickable */
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .rad-delete:active { background: #fca5a5; transform: scale(0.95); }
        }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // --- UTILS: IMAGE COMPRESSION ---
    const compressImage = (base64Str, maxWidth = 1600) => {
        return new Promise((resolve) => {
            const img = new Image();
            img.src = base64Str;
            img.onload = () => {
                const canvas = document.createElement('canvas');
                let width = img.width;
                let height = img.height;
                if (width > maxWidth) {
                    height = (maxWidth / width) * height;
                    width = maxWidth;
                }
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, width, height);
                resolve(canvas.toDataURL('image/jpeg', 0.8));
            };
            img.onerror = (err) => resolve(base64Str);
        });
    };

    // --- ICONS ---
    const Icon = ({ path, size = 18, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} dangerouslySetInnerHTML={{__html: path}} />
    );

    const icons = {
        user: '<path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',
        home: '<path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',
        camera: '<path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"></path><circle cx="12" cy="13" r="3"></circle>',
        trash: '<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',
        plus: '<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',
        print: '<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',
        edit: '<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',
        check: '<polyline points="20 6 9 17 4 12"></polyline>',
        zap: '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',
        thermometer: '<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',
        ruler: '<path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"></path>',
        truck: '<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',
        settings: '<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',
        chart: '<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',
        json: '<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',
        note: '<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',
        close: '<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>'
    };

    // --- PHOTO MANAGER ---
    const PhotoManager = ({ id, label, photos, setPhotos }) => {
        const fileInputRef = useRef(null);
        const currentPhotos = photos[id] || [];
        
        const handleFileChange = async (e) => {
            const files = Array.from(e.target.files);
            if (files.length === 0) return;
            for (const file of files) {
                await new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onloadend = async () => {
                        const compressed = await compressImage(reader.result);
                        setPhotos(prev => ({ ...prev, [id]: [...(prev[id] || []), compressed] }));
                        resolve();
                    };
                    reader.readAsDataURL(file);
                });
            }
            e.target.value = null;
        };

        const handleRemove = (index) => setPhotos(prev => ({ ...prev, [id]: prev[id].filter((_, i) => i !== index) }));

        return (
            <div className="mt-4 break-inside-avoid">
                <input type="file" ref={fileInputRef} onChange={handleFileChange} accept="image/*" multiple className="hidden" />
                <div className="flex justify-between items-end mb-2">
                    <label className="text-sm font-semibold text-[#1d1d1f]">{label}</label>
                    <span className="text-xs text-[#86868b] border px-2 py-0.5 rounded">{currentPhotos.length} Bilder</span>
                </div>
                <div className="grid grid-cols-3 sm:grid-cols-4 gap-3">
                    {currentPhotos.map((photo, index) => (
                        <div key={index} className="relative aspect-square rounded-xl overflow-hidden border border-[#d2d2d7] bg-black group">
                            <img src={photo} className="w-full h-full object-cover" />
                            <button onClick={() => handleRemove(index)} className="absolute top-1 right-1 bg-red-500 text-white w-7 h-7 rounded-full flex items-center justify-center shadow hover:bg-red-600 z-10"><Icon path={icons.trash} size={14} /></button>
                        </div>
                    ))}
                    <div onClick={() => fileInputRef.current.click()} className="aspect-square rounded-xl border-2 border-dashed border-[#d2d2d7] bg-[#fbfbfd] hover:bg-[#f0f8ff] hover:border-[#0071e3] cursor-pointer flex flex-col items-center justify-center gap-1 transition-all active:scale-95">
                        <Icon path={icons.plus} size={28} className="text-[#0071e3]" />
                        <span className="text-[10px] font-medium text-[#86868b]">Foto</span>
                    </div>
                </div>
            </div>
        );
    };

    // --- FORM COMPONENTS ---
    const Section = ({ id, icon, title, children }) => (
        <section id={id} className="bg-white p-6 rounded-2xl shadow-sm border border-[#d2d2d7] mb-8 animate-in break-inside-avoid scroll-mt-24">
            <div className="flex items-center gap-3 mb-6 border-b border-[#f5f5f7] pb-4">
                <div className="w-8 h-8 rounded-full bg-[#f5f5f7] flex items-center justify-center text-[#1d1d1f]"><Icon path={icon} size={16} /></div>
                <h2 className="text-[17px] font-semibold text-[#1d1d1f]">{title}</h2>
            </div>
            <div className="space-y-6">{children}</div>
        </section>
    );

    const TextInput = ({ label, value, onChange, width = "full", suffix, type="text", placeholder="" }) => (
        <div className={`bg-[#f5f5f7] rounded-xl px-4 py-2 border border-transparent focus-within:bg-white focus-within:border-[#0071e3] transition-all ${width === 'half' ? 'col-span-2 md:col-span-1' : 'col-span-2'}`}>
            <label className="block text-xs text-[#86868b] mb-1">{label}</label>
            <div className="flex items-center">
                <input type={type} value={value} onChange={onChange} placeholder={placeholder} className="w-full bg-transparent outline-none text-[#1d1d1f] p-1" />
                {suffix && <span className="text-xs text-[#86868b] ml-1">{suffix}</span>}
            </div>
        </div>
    );

    const SelectInput = ({ label, value, onChange, options, width = "half" }) => (
        <div className={`bg-[#f5f5f7] rounded-xl px-4 py-2 border border-transparent focus-within:bg-white focus-within:border-[#0071e3] col-span-2 ${width === 'half' ? 'md:col-span-1' : ''}`}>
            <label className="block text-xs text-[#86868b] mb-1">{label}</label>
            <select value={value} onChange={onChange} className="w-full bg-transparent outline-none text-[#1d1d1f] cursor-pointer appearance-none p-1">
                <option value="">Bitte wählen...</option>
                {options.map(opt => <option key={opt} value={opt}>{opt}</option>)}
            </select>
        </div>
    );

    const MultiSelect = ({ label, options, selected, onChange }) => {
        const toggle = (opt) => {
            if (selected.includes(opt)) {
                onChange(selected.filter(s => s !== opt));
            } else {
                onChange([...selected, opt]);
            }
        };
        return (
            <div className="col-span-2">
                <label className="block text-xs text-[#86868b] mb-2">{label}</label>
                <div className="flex flex-wrap gap-2">
                    {options.map(opt => (
                        <button key={opt} onClick={() => toggle(opt)} className={`px-3 py-2 text-xs font-medium rounded-full border transition-all active:scale-95 ${selected.includes(opt) ? 'bg-[#0071e3] text-white border-[#0071e3]' : 'bg-white text-gray-600 border-gray-200 hover:border-gray-300'}`}>{opt}</button>
                    ))}
                </div>
            </div>
        );
    };

    const Toggle = ({ label, checked, onChange }) => (
        <div className="flex items-center justify-between py-2 border-b border-gray-100 last:border-0">
            <span className="text-sm text-[#1d1d1f]">{label}</span>
            <label className="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" className="sr-only peer" checked={checked} onChange={onChange} />
                <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#34c759]"></div>
            </label>
        </div>
    );

    // --- PREVIEW LAYOUT ---
    const PreviewLayout = ({ data, photos }) => {
        const renderField = (label, value, fullWidth = false) => (
            <div className={`pdf-field ${fullWidth ? 'pdf-full-width' : ''}`}>
                <div className="pdf-label">{label}</div>
                <div className="pdf-value">{value || '-'}</div>
            </div>
        );
        const renderBool = (v) => v ? "Ja" : "Nein";
        
        const renderPhotoGrid = (id, title) => {
            const pics = photos[id] || [];
            if(pics.length === 0) return null;
            return (
                <div className="pdf-photos">
                    <div className="pdf-photo-title">{title} ({pics.length})</div>
                    <div className="pdf-photo-list">
                        {pics.map((src, i) => (
                            <div key={i} className="pdf-img-container">
                                <img src={src} className="pdf-img" />
                            </div>
                        ))}
                    </div>
                </div>
            )
        };

        const formatWaterHeating = () => {
            if (!data.waterHeating || data.waterHeating.length === 0) return '-';
            const base = data.waterHeating.join(', ');
            if (data.waterHeating.includes('Sonstiges') && data.waterHeatingOther) {
                return `${base} (${data.waterHeatingOther})`;
            }
            return base;
        };

        return (
            <div id="print-view">
                <div className="pdf-header">
                    <div>
                        <div className="pdf-title">VOT Protokoll</div>
                        <div className="pdf-subtitle">Mission Solar | Technische Aufnahme</div>
                    </div>
                    <div className="pdf-meta">
                        <div style={{fontWeight: 700}}>{data.firstName} {data.lastName}</div>
                        <div>{new Date().toLocaleDateString()}</div>
                    </div>
                </div>

                {/* 1. KUNDE */}
                <div className="pdf-section">
                    <div className="pdf-section-title">1. Kundendaten</div>
                    <div className="pdf-grid">
                        {renderField("Vorname", data.firstName)}
                        {renderField("Nachname", data.lastName)}
                        {renderField("Vollmacht vorhanden", renderBool(data.proxyActive))}
                    </div>
                    {data.proxyActive && renderPhotoGrid('foto_vollmacht', 'Vollmacht Dokument')}
                </div>

                {/* 2. GEBÄUDESTATUS */}
                <div className="pdf-section">
                    <div className="pdf-section-title">2. Gebäudestatus</div>
                    <div style={{marginBottom:10, fontWeight:'bold', fontSize:'10pt'}}>Bestandsheizung</div>
                    <div className="pdf-grid">
                        {renderField("System / Heizungstyp", data.heatingSystem)}
                        {renderField("Modell", data.heatingModel)}
                        {renderField("Baujahr", data.heatingYear)}
                        {renderField("Verbrauch", data.consumption)}
                        {renderField("Beheizte Fläche", data.heatedArea + " m²")}
                        {renderField("Warmwasserbereitung", formatWaterHeating(), true)}
                        
                        {data.heatingSystem === 'Wärmepumpe' && renderField("Pufferspeicher Bestand", data.bufferTank)}
                        {data.heatingSystem === 'Wärmepumpe' && renderField("WW-Speicher Bestand", data.waterTank)}
                        {data.heatingSystem === 'Wärmepumpe' && renderField("Inneneinheit Bestand", data.indoorUnit)}
                    </div>
                    
                    <div style={{marginBottom:10, fontWeight:'bold', fontSize:'10pt', marginTop: 15}}>Wärmeverteilung</div>
                    <div className="pdf-grid">
                        {renderField("Typ", data.heatDistribution === 'Andere' ? data.heatDistributionOther : data.heatDistribution)}
                        {renderField("Heizkreise (Anzahl)", data.heatingCircuits)}
                    </div>
                    
                    {renderPhotoGrid('fotos_heizung', 'Bestandsheizung & Gebäude')}
                    {renderPhotoGrid('fotos_verteiler_pumpen', 'Verteiler & Pumpengruppen')}
                    {renderPhotoGrid('fotos_leitungsfuehrung_bestand', 'Aktuelle Leitungsführung')}
                </div>

                {/* 3. TECHNIKRAUM */}
                <div className="pdf-section">
                    <div className="pdf-section-title">3. Technikraum</div>
                    <div className="pdf-grid">
                        {renderField("Rohrdimensionen", data.pipeDimensions)}
                        {renderField("Engste Tür", data.narrowestDoor + " cm")}
                    </div>
                    {renderPhotoGrid('fotos_platzmanagement', 'Platzmanagement Technikraum')}
                    {renderPhotoGrid('fotos_vorplanung', 'Vorplanung')}
                </div>

                {/* 4. AUSSENEINHEIT */}
                <div className="pdf-section">
                    <div className="pdf-section-title">4. Außeneinheit</div>
                    <div className="pdf-grid">
                        {renderField("Schutzbereich eingehalten", renderBool(data.protectionZoneOK))}
                        {renderField("Schallproblem?", renderBool(data.noiseProblem))}
                        {data.noiseProblem && renderField("Erklärung Schall", data.noiseProblemNotes, true)}
                        {renderField("Fundament", data.foundation)}
                        {renderField("Versickerungskapazität", data.infiltrationCapacity)}
                        {renderField("Kondensatableitung", data.condensateDrainage)}
                        {renderField("Begleitheizung notwendig", renderBool(data.traceHeating))}
                        {renderField("Leitungsweg bis Eingang (m)", data.pipeLengthOuter + " m")}
                        {renderField("Wanddurchführung", data.wallBreakthroughType)}
                        {(data.wallBreakthroughType === 'Bohrung notwendig' || data.wallBreakthroughType === 'Unterirdisch mit Wanddurchführung') && renderField("Material", data.wallMaterial)}
                        {(data.wallBreakthroughType === 'Bohrung notwendig' || data.wallBreakthroughType === 'Unterirdisch mit Wanddurchführung') && renderField("Dicke", data.wallThickness + " cm")}
                        {renderField("Besonderheiten", data.outdoorNotes, true)}
                    </div>
                    {renderPhotoGrid('fotos_aufstellort', 'Aufstellort')}
                    {renderPhotoGrid('fotos_leitungsweg', 'Leitungsweg Außen')}
                    {renderPhotoGrid('fotos_wand', 'Wanddurchführung')}
                </div>

                {/* 5. ELEKTRO */}
                <div className="pdf-section">
                    <div className="pdf-section-title">5. Elektro</div>
                    <div className="pdf-grid">
                        {renderField("Hauptsicherung", data.mainFuse + " A")}
                        {renderField("Platz im Verteiler", renderBool(data.elecSpace))}
                        {renderField("Erdungsschiene Frei", renderBool(data.groundingRail))}
                        {renderField("Internet (LAN)", data.internetLan || "Nicht gewählt")}
                        {renderField("Kabelweg (Innen -> Verteiler)", data.cablePathInner)}
                        {renderField("Anmerkungen", data.elecNotes, true)}
                    </div>
                    {renderPhotoGrid('fotos_verteiler', 'Elektroverteiler')}
                </div>

                {/* 6. HEIZKÖRPER TAUSCH (NEW) */}
                <div className="pdf-section">
                    <div className="pdf-section-title">6. Heizkörper Tausch</div>
                    <div className="pdf-grid">
                        {renderField("Anzahl zu tauschen", data.radiators.length.toString())}
                    </div>
                    {data.radiators.length > 0 ? (
                        <div>
                            {data.radiators.map((rad, idx) => (
                                <div key={rad.id} style={{marginBottom: '20px', border:'1px solid #eee', padding:'10px', borderRadius:'4px', breakInside:'avoid'}}>
                                    <div style={{fontWeight:'bold', marginBottom:'5px', color:'#0071e3'}}>Heizkörper #{idx + 1}</div>
                                    <table className="rad-table" style={{width:'100%', marginBottom:'10px'}}>
                                        <tr>
                                            <td style={{width:'33%'}}><strong>Typ:</strong> {rad.type}</td>
                                            <td style={{width:'33%'}}><strong>Maße:</strong> {rad.height}cm x {rad.width}cm</td>
                                            <td style={{width:'33%'}}><strong>Anschluss:</strong> {rad.connection}</td>
                                        </tr>
                                    </table>
                                    {renderPhotoGrid(`radiator_${rad.id}`, `Foto Heizkörper #${idx + 1}`)}
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div style={{fontStyle:'italic', color:'#666'}}>Keine Heizkörper zum Tausch erfasst.</div>
                    )}
                </div>

                {/* 7. LIEFERDETAILS */}
                <div className="pdf-section">
                    <div className="pdf-section-title">7. Lieferdetails</div>
                    <div className="pdf-grid">
                        {renderField("Ablageort", data.deliveryLocation, true)}
                        {renderField("Lieferwünsche", data.deliveryWishes, true)}
                    </div>
                    {renderPhotoGrid('fotos_ablageort', 'Ablageort')}
                </div>

                <div className="pdf-section">
                    <div className="pdf-section-title">Allgemeine Notizen</div>
                    <div style={{whiteSpace: 'pre-wrap', fontSize: '11pt'}}>{data.generalNotes}</div>
                </div>
            </div>
        );
    };

    // --- MAIN APP ---
    function App() {
        const [view, setView] = useState('input');
        const [showNotes, setShowNotes] = useState(false);
        
        // --- LOCAL STORAGE INIT ---
        const [data, setData] = useState(() => {
            const saved = localStorage.getItem('vot_data');
            return saved ? JSON.parse(saved) : {
                firstName: '', lastName: '', proxyActive: false,
                heatingSystem: '', heatingModel: '', heatingYear: '', consumption: '', heatedArea: '',
                heatDistribution: '', heatDistributionOther: '', heatingCircuits: '', 
                waterHeating: [], waterHeatingOther: '', 
                bufferTank: '', waterTank: '', indoorUnit: '',
                pipeDimensions: '', narrowestDoor: '',
                protectionZoneOK: true, noiseProblem: false, noiseProblemNotes: '', 
                pipeLengthOuter: '', wallBreakthroughType: '', wallMaterial: '', wallThickness: '', outdoorNotes: '',
                foundation: '', infiltrationCapacity: '', condensateDrainage: '', traceHeating: false,
                mainFuse: '', elecSpace: true, groundingRail: true, cablePathInner: '', internetLan: '', elecNotes: '',
                deliveryLocation: '', deliveryWishes: '', generalNotes: '',
                radiators: [] 
            };
        });

        const [photos, setPhotos] = useState(() => {
            const saved = localStorage.getItem('vot_photos');
            return saved ? JSON.parse(saved) : {};
        });

        const update = (field, val) => setData(prev => ({ ...prev, [field]: val }));

        // Radiator Helper Functions
        const addRadiator = () => {
            const newRad = { id: Date.now() + Math.random(), type: '', height: '', width: '', connection: '' };
            setData(prev => ({ ...prev, radiators: [...prev.radiators, newRad] }));
        };

        const removeRadiator = (e, id) => {
            e.stopPropagation(); // Prevents bubbling
            if(confirm('Heizkörper wirklich löschen?')) {
                setData(prev => ({ ...prev, radiators: prev.radiators.filter(r => r.id !== id) }));
                setPhotos(prev => {
                    const newPhotos = { ...prev };
                    delete newPhotos[`radiator_${id}`];
                    return newPhotos;
                });
            }
        };

        const updateRadiator = (id, field, value) => {
            setData(prev => ({
                ...prev,
                radiators: prev.radiators.map(r => r.id === id ? { ...r, [field]: value } : r)
            }));
        };

        useEffect(() => { localStorage.setItem('vot_data', JSON.stringify(data)); }, [data]);
        useEffect(() => { 
            try { localStorage.setItem('vot_photos', JSON.stringify(photos)); } 
            catch (e) { console.warn("Quota exceeded"); }
        }, [photos]);

        const handlePrint = () => { window.print(); };
        const handleReset = () => { if (confirm("Wirklich alles löschen?")) { localStorage.clear(); window.location.reload(); }};
        const handleJsonExport = () => {
            const blob = new Blob([JSON.stringify({ ...data, photos }, null, 2)], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `VOT_${data.lastName}_${data.firstName}.json`;
            link.click();
        };

        return (
            <div className={`min-h-screen ${view === 'preview' ? 'preview-mode' : 'edit-mode'}`}>
                {view === 'preview' ? (
                    <div className="bg-gray-100 min-h-screen pb-20">
                        <div className="sticky top-0 z-50 bg-white border-b border-gray-200 px-4 py-3 flex justify-between items-center shadow-sm no-print">
                            <button onClick={() => setView('input')} className="text-[#0071e3] font-medium flex items-center gap-1 hover:underline"><Icon path={icons.edit} /> Zurück</button>
                            <button onClick={handlePrint} className="px-5 py-2 rounded-full font-bold shadow-lg flex items-center gap-2 transition-all bg-[#0071e3] text-white hover:bg-[#005bb5]"><Icon path={icons.print} /> PDF / Drucken</button>
                        </div>
                        <div className="py-4 px-2"><PreviewLayout data={data} photos={photos} /></div>
                    </div>
                ) : (
                    <div className="pb-32">
                        <nav className="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-[#d2d2d7] no-print">
                            <div className="max-w-3xl mx-auto px-4 h-14 flex items-center justify-between">
                                <div className="font-semibold text-lg">Mission Solar | VOT V36</div>
                                <div className="flex gap-2 items-center"><button onClick={handleReset} className="text-xs font-bold text-red-500 uppercase px-3 py-1.5 border border-red-200 rounded bg-red-50">Reset</button></div>
                            </div>
                        </nav>

                        <main className="max-w-3xl mx-auto pt-6 px-4 space-y-6">
                            
                            <Section id="sec-1" icon={icons.user} title="1. Kundendaten">
                                <div className="grid grid-cols-2 gap-3">
                                    <TextInput label="Vorname" value={data.firstName} onChange={e => update('firstName', e.target.value)} width="half" />
                                    <TextInput label="Nachname" value={data.lastName} onChange={e => update('lastName', e.target.value)} width="half" />
                                </div>
                                <div className="mt-2 border-t pt-2">
                                    <Toggle label="Vollmacht vorhanden?" checked={data.proxyActive} onChange={e => update('proxyActive', e.target.checked)} />
                                    {data.proxyActive && <PhotoManager id="foto_vollmacht" label="Foto Vollmacht" photos={photos} setPhotos={setPhotos} />}
                                </div>
                            </Section>

                            <Section id="sec-2" icon={icons.home} title="2. Gebäudestatus">
                                <h3 className="font-bold text-sm text-[#0071e3] uppercase mb-2">Bestandsheizung</h3>
                                <div className="grid grid-cols-2 gap-3 mb-4">
                                    <SelectInput label="System / Heizungstyp" value={data.heatingSystem} onChange={e => update('heatingSystem', e.target.value)} options={['Ölheizung', 'Gasheizung', 'Wärmepumpe', 'Holz / Pellets', 'Fernwärme', 'Sonstiges']} width="full" />
                                    <TextInput label="Modell" value={data.heatingModel} onChange={e => update('heatingModel', e.target.value)} />
                                    <TextInput label="Baujahr" value={data.heatingYear} onChange={e => update('heatingYear', e.target.value)} width="half" />
                                    <TextInput label="Verbrauch (Liter/m³)" value={data.consumption} onChange={e => update('consumption', e.target.value)} width="half" />
                                    <TextInput label="Beheizte Fläche" value={data.heatedArea} onChange={e => update('heatedArea', e.target.value)} suffix="m²" />
                                    <MultiSelect label="Warmwasserbereitung (Mehrfachauswahl möglich)" selected={data.waterHeating} onChange={val => update('waterHeating', val)} options={['Zentral über Heizung', 'Brauchwasserwärmepumpe', 'Durchlauferhitzer', 'Boiler (Elektro)', 'Solarthermie', 'Sonstiges']} />
                                    {data.waterHeating.includes('Sonstiges') && (<div className="col-span-2 mt-2 animate-in"><TextInput label="Bitte spezifizieren (Sonstiges)" value={data.waterHeatingOther} onChange={e => update('waterHeatingOther', e.target.value)} /></div>)}
                                </div>
                                {data.heatingSystem === 'Wärmepumpe' && (
                                    <div className="bg-blue-50 p-4 rounded-xl border border-blue-100 mb-6 animate-in">
                                        <h4 className="text-xs font-bold uppercase text-blue-600 mb-3">Bestandskomponenten (da WP ausgewählt)</h4>
                                        <div className="grid grid-cols-2 gap-3">
                                            <TextInput label="Pufferspeicher Bestand" value={data.bufferTank} onChange={e => update('bufferTank', e.target.value)} />
                                            <TextInput label="Warmwasserspeicher Bestand" value={data.waterTank} onChange={e => update('waterTank', e.target.value)} />
                                            <TextInput label="Inneneinheit Bestand" value={data.indoorUnit} onChange={e => update('indoorUnit', e.target.value)} />
                                        </div>
                                    </div>
                                )}
                                <PhotoManager id="fotos_heizung" label="Fotos: Bestandsheizung" photos={photos} setPhotos={setPhotos} />
                                <h3 className="font-bold text-sm text-[#0071e3] uppercase mb-2 mt-6">Wärmeverteilung</h3>
                                <div className="grid grid-cols-2 gap-3 mb-4">
                                    <SelectInput label="Wärmeverteilung" value={data.heatDistribution} onChange={e => update('heatDistribution', e.target.value)} options={['Nur Heizkörper', 'Nur Fußbodenheizung', 'Gemischt (HK + FBH)', 'Andere']} width="full" />
                                    {data.heatDistribution === 'Andere' && (<div className="col-span-2"><TextInput label="Bitte spezifizieren" value={data.heatDistributionOther} onChange={e => update('heatDistributionOther', e.target.value)} /></div>)}
                                    <TextInput label="Anzahl Heizkreise" value={data.heatingCircuits} onChange={e => update('heatingCircuits', e.target.value)} width="half" />
                                </div>
                                <PhotoManager id="fotos_verteiler_pumpen" label="Fotos: Verteiler und Pumpengruppen" photos={photos} setPhotos={setPhotos} />
                                <PhotoManager id="fotos_leitungsfuehrung_bestand" label="Fotos: Aktuelle Leitungsführung" photos={photos} setPhotos={setPhotos} />
                            </Section>

                            <Section id="sec-3" icon={icons.settings} title="3. Technikraum">
                                <div className="grid grid-cols-2 gap-3">
                                    <TextInput label="Bestandsrohrdimensionen" value={data.pipeDimensions} onChange={e => update('pipeDimensions', e.target.value)} />
                                    <TextInput label="Engste Tür (cm)" value={data.narrowestDoor} onChange={e => update('narrowestDoor', e.target.value)} suffix="cm" />
                                </div>
                                <div className="space-y-2 mt-4">
                                    <PhotoManager id="fotos_platzmanagement" label="Platzmanagement (Übersicht)" photos={photos} setPhotos={setPhotos} />
                                    <PhotoManager id="fotos_vorplanung" label="Fotos: Vorplanung" photos={photos} setPhotos={setPhotos} />
                                </div>
                            </Section>

                            <Section id="sec-4" icon={icons.camera} title="4. Außeneinheit">
                                <div className="space-y-4">
                                    <div className="bg-red-50 p-4 rounded-xl border border-red-100">
                                        <Toggle label="Gibt es ein Schallproblem?" checked={data.noiseProblem} onChange={e => update('noiseProblem', e.target.checked)} />
                                        {data.noiseProblem && (<div className="mt-2 animate-in"><TextInput label="Erklärung Schallproblem" value={data.noiseProblemNotes} onChange={e => update('noiseProblemNotes', e.target.value)} placeholder="Beschreibung..." /></div>)}
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-xl border border-blue-100">
                                        <Toggle label="Schutzbereich eingehalten?" checked={data.protectionZoneOK} onChange={e => update('protectionZoneOK', e.target.checked)} />
                                    </div>
                                    <div className="bg-[#f0f9ff] p-4 rounded-xl border border-blue-100 mt-4 animate-in">
                                        <h4 className="text-xs font-bold uppercase text-blue-600 mb-3">Aufstellung & Kondensat</h4>
                                        <div className="grid grid-cols-2 gap-3 mb-4">
                                            <SelectInput label="Fundament" value={data.foundation} onChange={e => update('foundation', e.target.value)} options={['Bauseitig vorhanden', 'Wird gebaut', 'Kein Fundament (Wiese o.Ä.)']} width="full" />
                                        </div>
                                        <div className="grid grid-cols-2 gap-3 mb-2">
                                            <TextInput label="Versickerungskapazität / Boden" value={data.infiltrationCapacity} onChange={e => update('infiltrationCapacity', e.target.value)} width="full" placeholder="z.B. Lehm, Kies, etc." />
                                            <SelectInput label="Art der Kondensatableitung" value={data.condensateDrainage} onChange={e => update('condensateDrainage', e.target.value)} options={['Kiesbett', 'Kanalanschluss', 'Dachrinne']} width="full" />
                                        </div>
                                        <div className="mt-2"><Toggle label="Begleitheizung notwendig?" checked={data.traceHeating} onChange={e => update('traceHeating', e.target.checked)} /></div>
                                    </div>
                                    <PhotoManager id="fotos_aufstellort" label="Aufstellort Foto" photos={photos} setPhotos={setPhotos} />
                                    <div className="grid grid-cols-2 gap-3 pt-4 border-t">
                                        <TextInput label="Leitungsweg bis Eingang (m)" value={data.pipeLengthOuter} onChange={e => update('pipeLengthOuter', e.target.value)} suffix="m" />
                                        <PhotoManager id="fotos_leitungsweg" label="Leitungsweg Foto" photos={photos} setPhotos={setPhotos} />
                                    </div>
                                    <div className="pt-4 border-t">
                                        <SelectInput label="Wanddurchführung Art" value={data.wallBreakthroughType} onChange={e => update('wallBreakthroughType', e.target.value)} options={['Bestandsöffnung', 'Bohrung notwendig', 'Unterirdisch mit Wanddurchführung']} width="full" />
                                        {(data.wallBreakthroughType === 'Bohrung notwendig' || data.wallBreakthroughType === 'Unterirdisch mit Wanddurchführung') && (
                                            <div className="grid grid-cols-2 gap-3 mt-3 bg-gray-50 p-3 rounded-xl animate-in">
                                                <TextInput label="Material" value={data.wallMaterial} onChange={e => update('wallMaterial', e.target.value)} width="half" />
                                                <TextInput label="Wie Dick (cm)" value={data.wallThickness} onChange={e => update('wallThickness', e.target.value)} width="half" type="number" />
                                            </div>
                                        )}
                                        <PhotoManager id="fotos_wand" label="Wanddurchführung Foto" photos={photos} setPhotos={setPhotos} />
                                    </div>
                                    <div className="pt-2">
                                        <label className="text-xs text-[#86868b] mb-1 block">Besonderheiten</label>
                                        <textarea className="w-full bg-[#f5f5f7] rounded-xl p-3 text-sm h-24 outline-none border border-transparent focus:bg-white focus:border-[#0071e3]" value={data.outdoorNotes} onChange={(e) => update('outdoorNotes', e.target.value)} placeholder="Notizen zur Außenaufstellung..." />
                                    </div>
                                </div>
                            </Section>

                            <Section id="sec-5" icon={icons.zap} title="5. Elektro">
                                <div className="grid grid-cols-2 gap-3">
                                    <div className="col-span-2 md:col-span-1">
                                        <TextInput label="Hauptsicherung (A)" value={data.mainFuse} onChange={e => update('mainFuse', e.target.value)} width="full" suffix="A" />
                                        <div className="text-xs text-orange-600 mt-1 pl-1">Empfehlung: Mindest-Tarifschalter von 30A (eher 40A) für maximale WP-Nutzung.</div>
                                    </div>
                                    <div className="col-span-2 md:col-span-1 space-y-2 pt-1">
                                        <Toggle label="Platz im Verteiler?" checked={data.elecSpace} onChange={e => update('elecSpace', e.target.checked)} />
                                        <Toggle label="Erdungsschiene frei?" checked={data.groundingRail} onChange={e => update('groundingRail', e.target.checked)} />
                                        <div className="bg-[#f0f9ff] p-2 rounded-lg border border-blue-200 mt-2">
                                            <label className="block text-xs font-bold text-blue-800 mb-1">Internet verfügbar (LAN)?</label>
                                            <select value={data.internetLan} onChange={e => update('internetLan', e.target.value)} className="w-full bg-white p-2 rounded border border-blue-200 text-sm outline-none">
                                                <option value="">Bitte wählen...</option>
                                                <option value="Ja">Ja</option>
                                                <option value="Nein">Nein</option>
                                            </select>
                                            {!data.internetLan && <div className="text-[10px] text-red-500 mt-1">Auswahl erforderlich</div>}
                                        </div>
                                    </div>
                                    <TextInput label="Kabelweg (Innen zu Verteiler)" value={data.cablePathInner} onChange={e => update('cablePathInner', e.target.value)} />
                                </div>
                                <div className="mt-4"><label className="text-xs text-[#86868b] mb-1 block">Anmerkungsfeld Elektro</label><textarea className="w-full bg-[#f5f5f7] rounded-xl p-3 text-sm h-20 outline-none" value={data.elecNotes} onChange={(e) => update('elecNotes', e.target.value)} /></div>
                                <PhotoManager id="fotos_verteiler" label="Fotos Verteiler / Elektro" photos={photos} setPhotos={setPhotos} />
                            </Section>

                            <Section id="sec-6" icon={icons.thermometer} title="6. Heizkörper Tausch">
                                <div className="mb-4 flex items-center justify-between bg-blue-50 p-3 rounded-lg border border-blue-100">
                                    <div className="font-bold text-blue-800 text-sm">Anzahl zu tauschen: {data.radiators.length}</div>
                                    <button onClick={addRadiator} className="bg-blue-600 text-white text-xs font-bold px-3 py-2 rounded-full flex items-center gap-1 active:scale-95 transition-transform"><Icon path={icons.plus} size={14}/> Heizkörper hinzufügen</button>
                                </div>
                                <div className="space-y-4">
                                    {data.radiators.map((rad, idx) => (
                                        <div key={rad.id} className="rad-card animate-in">
                                            <button type="button" onClick={(e) => removeRadiator(e, rad.id)} className="rad-delete z-10 hover:bg-red-200 transition-colors"><Icon path={icons.trash} size={18}/></button>
                                            <h4 className="font-bold text-sm mb-3">Heizkörper #{idx + 1}</h4>
                                            <div className="grid grid-cols-2 gap-3 mb-2">
                                                <SelectInput label="Typ" value={rad.type} onChange={e => updateRadiator(rad.id, 'type', e.target.value)} options={['Typ 11', 'Typ 21', 'Typ 22', 'Typ 33', 'Handtuchhalter', 'Sonstiges']} width="full" />
                                                <SelectInput label="Anschluss" value={rad.connection} onChange={e => updateRadiator(rad.id, 'connection', e.target.value)} options={['Gleichseitig', 'Wechselseitig', 'Reitend', 'Gleichseitig (Einrohr)', 'Mittelanschluss (Einrohr)', 'Hängend', 'Sonstiges']} width="full" />
                                            </div>
                                            <div className="grid grid-cols-2 gap-3 mb-3">
                                                <TextInput label="Höhe (cm)" value={rad.height} onChange={e => updateRadiator(rad.id, 'height', e.target.value)} width="half" type="number" />
                                                <TextInput label="Breite (cm)" value={rad.width} onChange={e => updateRadiator(rad.id, 'width', e.target.value)} width="half" type="number" />
                                            </div>
                                            <PhotoManager id={`radiator_${rad.id}`} label={`Foto Heizkörper #${idx+1}`} photos={photos} setPhotos={setPhotos} />
                                        </div>
                                    ))}
                                    {data.radiators.length === 0 && <div className="text-center text-gray-400 text-xs py-4">Keine Heizkörper zum Tausch hinzugefügt.</div>}
                                </div>
                            </Section>

                            <Section id="sec-7" icon={icons.truck} title="7. Lieferdetails">
                                <TextInput label="Ablageort" value={data.deliveryLocation} onChange={e => update('deliveryLocation', e.target.value)} />
                                <PhotoManager id="fotos_ablageort" label="Foto Ablageort" photos={photos} setPhotos={setPhotos} />
                                <div className="mt-4"><label className="text-xs text-[#86868b] mb-1 block">Lieferwünsche Kunde</label><textarea className="w-full bg-[#f5f5f7] rounded-xl p-3 text-sm h-24 outline-none" value={data.deliveryWishes} onChange={(e) => update('deliveryWishes', e.target.value)} placeholder="Besondere Wünsche..." /></div>
                            </Section>

                        </main>

                        {/* --- FLOATING NOTES BUTTON --- */}
                        <div className="fixed bottom-24 right-4 z-50 floating-btn">
                            <button 
                                onClick={() => setShowNotes(true)}
                                className="w-14 h-14 bg-yellow-400 rounded-full shadow-xl flex items-center justify-center text-yellow-900 hover:bg-yellow-500 transition-all active:scale-95"
                            >
                                <Icon path={icons.note} size={24} />
                            </button>
                        </div>

                        {/* --- NOTES MODAL --- */}
                        {showNotes && (
                            <div className="fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-end sm:items-center justify-center p-0 sm:p-4">
                                <div className="bg-white w-full sm:w-[500px] h-[80vh] sm:h-auto rounded-t-2xl sm:rounded-2xl shadow-2xl flex flex-col animate-in slide-in-from-bottom-10">
                                    <div className="p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-2xl">
                                        <h3 className="font-bold text-lg">Notizen / Kundenwünsche</h3>
                                        <button onClick={() => setShowNotes(false)} className="text-gray-500 hover:text-black p-2"><Icon path={icons.close} size={24}/></button>
                                    </div>
                                    <div className="p-4 flex-1">
                                        <textarea 
                                            className="w-full h-full bg-transparent resize-none outline-none text-lg p-2" 
                                            placeholder="Hier Notizen eingeben..." 
                                            value={data.generalNotes} 
                                            onChange={(e) => update('generalNotes', e.target.value)}
                                            autoFocus
                                        ></textarea>
                                    </div>
                                    <div className="p-4 border-t bg-gray-50 rounded-b-2xl">
                                        <button onClick={() => setShowNotes(false)} className="w-full bg-[#0071e3] text-white py-3 rounded-xl font-bold">Fertig</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        <div className="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t border-[#d2d2d7] p-4 z-50 no-print safe-area-pb">
                            <div className="max-w-3xl mx-auto flex gap-3">
                                <button onClick={handleJsonExport} className="flex-1 bg-gray-100 py-3.5 rounded-full font-medium flex justify-center items-center gap-2 active:bg-gray-200 transition-colors text-sm">
                                    <Icon path={icons.json} size={18}/> Speichern
                                </button>
                                <button onClick={() => setView('preview')} className="flex-1 bg-[#0071e3] text-white py-3.5 rounded-full font-medium shadow-lg hover:shadow-xl hover:bg-[#005bb5] transition-all flex justify-center items-center gap-2 active:scale-95 text-sm">
                                    <Icon path={icons.check} size={18}/> Fertig
                                </button>
                            </div>
                        </div>

                    </div>
                )}
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>

</body>
</html>
